(this.webpackJsonptrx_dapp_demo=this.webpackJsonptrx_dapp_demo||[]).push([[5],{126:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(9);function r(){return Object(c.c)((function(e){return e.contracts}))}},127:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(0),r=n(128),a=n.n(r);function i(e,t){var n=Object(c.useMemo)((function(){var e,n,c,r;return{offset:null!=(e=null===t||void 0===t?void 0:t.offset)?e:0,debounce:null!=(n=null===t||void 0===t?void 0:t.debounce)?n:200,debounceOptions:null!=(c=null===t||void 0===t?void 0:t.debounceOptions)?c:{leading:!0},triggerOnNoScroll:null!=(r=null===t||void 0===t?void 0:t.triggerOnNoScroll)&&r}}),[null===t||void 0===t?void 0:t.offset,null===t||void 0===t?void 0:t.debounce,null===t||void 0===t?void 0:t.debounceOptions,null===t||void 0===t?void 0:t.triggerOnNoScroll]),r=n.offset,i=n.triggerOnNoScroll,s=n.debounce,u=n.debounceOptions,o=Object(c.useMemo)((function(){return function(e,t,n){return e?a()(t,e,n):t}(s,e,u)}),[s,e]),l=Object(c.useRef)(null),b=Object(c.useCallback)((function(){if(null!=l.current){var e=l.current,t=Math.round(e.scrollTop+e.clientHeight);Math.round(e.scrollHeight-r)<=t&&o()}else{var n=document.scrollingElement||document.documentElement,c=Math.round(n.scrollTop+window.innerHeight);Math.round(n.scrollHeight-r)<=c&&o()}}),[r,e,l.current]);return Object(c.useEffect)((function(){var e=l.current;return null!=e?e.addEventListener("scroll",b):window.addEventListener("scroll",b),i&&b(),function(){null!=e?e.removeEventListener("scroll",b):window.removeEventListener("scroll",b)}}),[b,s]),l}},128:function(e,t,n){(function(t){var n=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,o=s||u||Function("return this")(),l=Object.prototype.toString,b=Math.max,j=Math.min,d=function(){return o.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function O(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==l.call(e)}(e))return NaN;if(f(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=f(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=r.test(e);return s||a.test(e)?i(e.slice(2),s?2:8):c.test(e)?NaN:+e}e.exports=function(e,t,n){var c,r,a,i,s,u,o=0,l=!1,v=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var n=c,a=r;return c=r=void 0,o=t,i=e.apply(a,n)}function h(e){return o=e,s=setTimeout(g,t),l?x(e):i}function m(e){var n=e-u;return void 0===u||n>=t||n<0||v&&e-o>=a}function g(){var e=d();if(m(e))return w(e);s=setTimeout(g,function(e){var n=t-(e-u);return v?j(n,a-(e-o)):n}(e))}function w(e){return s=void 0,p&&c?x(e):(c=r=void 0,i)}function _(){var e=d(),n=m(e);if(c=arguments,r=this,u=e,n){if(void 0===s)return h(u);if(v)return s=setTimeout(g,t),x(u)}return void 0===s&&(s=setTimeout(g,t)),i}return t=O(t)||0,f(n)&&(l=!!n.leading,a=(v="maxWait"in n)?b(O(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),_.cancel=function(){void 0!==s&&clearTimeout(s),o=0,c=u=r=s=void 0},_.flush=function(){return void 0===s?i:w(d())},_}}).call(this,n(50))},133:function(e,t,n){},134:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=(n(133),n(35)),i=n(27),s=n.n(i),u=n(36),o=n(4),l=n(5),b=n.n(l),j=n(28),d=n.n(j),f=n(23),O=n(9),v=n(21),p=n(30),x=n(14),h=n(126),m=n(12),g=n(37),w=n(31),_=n(2),k=n(127),N=n(25),S="https://shasta.worldtron.org",y=function(e){try{if(e){var t=e.data;return 200===e.status?Object(_.a)({},t):{code:10002,data:t.data}}return{code:10003,data:null}}catch(n){return{code:10001,data:null}}},T=function(){var e=Object(v.a)().walletAddr,t=Object(r.useState)([]),n=Object(o.a)(t,2),i=n[0],l=n[1],b=Object(r.useState)(!1),j=Object(o.a)(b,2),f=j[0],O=j[1],p=Object(N.a)().emitTronLinkEvent,x=Object(r.useState)({total:0,page:0,limit:5}),h=Object(o.a)(x,2),g=h[0],T=h[1],E=function(){var t=Object(u.a)(s.a.mark((function t(n){var c,r,a,u,o,b,j,v,p,x=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=x.length>1&&void 0!==x[1]?x[1]:10,!f){t.next=3;break}return t.abrupt("return");case 3:return O(!0),r=window.tronWeb.address.toHex(e),t.next=7,Object(m.b)("".concat(S,"/v1/api/swap/").concat(r),{params:{page:n,limit:c}}).catch((function(e){O(!1)}));case 7:a=t.sent,u=y(a),o=u.code,b=u.data,200===o&&(j=b.list,v=b.page,p=b.total,j=j.map((function(e){return{trxId:e.TransactionId,sender:Object(m.g)(window.tronWeb.address.fromHex(e.Sender),6),wToken:new d.a(e.Token).div(new d.a(10).pow(18)).toString()}})),l(1===v?j:[].concat(Object(w.a)(i),Object(w.a)(j))),T(Object(_.a)(Object(_.a)({},g),{},{page:v,total:p}))),setTimeout((function(){O(!1)}),100);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){e&&E(1)}),[e,p]);var C=Object(k.a)((function(){g.total!==i.length&&e&&!f&&E(g.page+1)}),{debounce:100});return Object(c.jsxs)("div",{ref:C,className:"list-view",children:[Object(c.jsx)("ul",{className:"c-list",children:i.map((function(e,t){return Object(c.jsxs)("li",{children:[Object(c.jsx)("div",{children:e.sender}),Object(c.jsx)("div",{children:"+".concat(e.wToken," wtoken")})]},t)}))}),f?Object(c.jsx)(a.g,{}):0===i.length?Object(c.jsx)(a.j,{}):""]})},E=function(){var e=Object(v.a)().walletAddr,t=Object(r.useState)([]),n=Object(o.a)(t,2),i=n[0],l=n[1],b=Object(r.useState)(!1),j=Object(o.a)(b,2),d=j[0],f=j[1],O=Object(N.a)().emitTronLinkEvent,p=Object(r.useState)({total:0,page:0,limit:5}),x=Object(o.a)(p,2),h=x[0],g=x[1],T=function(){var t=Object(u.a)(s.a.mark((function t(n){var c,r,a,u,o,b,j,O,v,p=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=p.length>1&&void 0!==p[1]?p[1]:10,!d){t.next=3;break}return t.abrupt("return");case 3:return f(!0),r=window.tronWeb.address.toHex(e),t.next=7,Object(m.b)("".concat(S,"/v1/api/bind/").concat(r),{params:{page:n,limit:c}}).catch((function(e){f(!1)}));case 7:a=t.sent,u=y(a),o=u.code,b=u.data,200===o&&(j=b.list,O=b.page,v=b.total,j=j.map((function(e){return{trxId:e.TransactionId,self:Object(m.g)(window.tronWeb.address.fromHex(e.Parent),6),invited:Object(m.g)(window.tronWeb.address.fromHex(e.Sender),6)}})),l(1===O?j:[].concat(Object(w.a)(i),Object(w.a)(j))),g(Object(_.a)(Object(_.a)({},h),{},{page:O,total:v}))),setTimeout((function(){f(!1)}),100);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){e&&T(1)}),[e,O]);var E=Object(k.a)((function(){h.total!==i.length&&e&&!d&&T(h.page+1)}));return Object(c.jsxs)("div",{ref:E,className:"list-view",children:[Object(c.jsx)("ul",{className:"c-list invite",children:i.map((function(e,t){return Object(c.jsxs)("li",{children:[Object(c.jsx)("div",{children:e.self}),Object(c.jsx)("div",{className:"invite",children:"\u9080"}),Object(c.jsx)("div",{children:e.invited})]},t)}))}),d?Object(c.jsx)(a.g,{}):0===i.length?Object(c.jsx)(a.j,{}):""]})},C=function(){var e=Object(v.a)().walletAddr,t=Object(r.useState)([]),n=Object(o.a)(t,2),i=n[0],l=n[1],b=Object(r.useState)(!1),j=Object(o.a)(b,2),f=j[0],O=j[1],p=Object(N.a)().emitTronLinkEvent,x=Object(r.useState)({total:0,page:0,limit:5}),h=Object(o.a)(x,2),g=h[0],T=h[1],E=function(){var t=Object(u.a)(s.a.mark((function t(n){var c,r,a,u,o,b,j,v,p,x=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=x.length>1&&void 0!==x[1]?x[1]:10,!f){t.next=3;break}return t.abrupt("return");case 3:return O(!0),r=window.tronWeb.address.toHex(e),t.next=7,Object(m.b)("".concat(S,"/v1/api/transfer/").concat(r),{params:{page:n,limit:c}}).catch((function(e){O(!1)}));case 7:a=t.sent,u=y(a),o=u.code,b=u.data,200===o&&(j=b.list,v=b.page,p=b.total,j=j.map((function(e){return{trxId:e.TransactionId,to:Object(m.g)(window.tronWeb.address.fromHex(e.To),6),amount:new d.a(e.Value).div(new d.a(10).pow(18)).toString()}})),l(1===v?j:[].concat(Object(w.a)(i),Object(w.a)(j))),T(Object(_.a)(Object(_.a)({},g),{},{page:v,total:p}))),setTimeout((function(){O(!1)}),100);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){e&&E(1)}),[e,p]);var C=Object(k.a)((function(){g.total!==i.length&&e&&!f&&E(g.page+1)}));return Object(c.jsxs)("div",{ref:C,className:"list-view",children:[Object(c.jsx)("ul",{className:"c-list",children:i.map((function(e,t){return Object(c.jsxs)("li",{children:[Object(c.jsx)("div",{children:"To: ".concat(e.to)}),Object(c.jsx)("div",{children:"-".concat(e.amount," wtoken")})]},t)}))}),f?Object(c.jsx)(a.g,{}):0===i.length?Object(c.jsx)(a.j,{}):""]})},W=n.p+"static/media/mapping_fuel_en.86d5d041.png",H=n.p+"static/media/snap_up_club_en.3045c925.png",M=(n(134),n(125)),R=function(e){var t=e.value,n=e.hasUnit;if(null===t||void 0===t)return Object(c.jsx)(a.g,{className:"value-holder-loading"});var r=t.toString().length>24?".26rem":".28rem";return Object(c.jsxs)("span",{className:"val",style:{fontSize:r},children:[t,n||""]})},I=function(){var e=Object(M.a)().t,t=Object(r.useState)(!1),n=Object(o.a)(t,2),i=n[0],l=n[1],j=Object(r.useState)(0),w=Object(o.a)(j,2),_=w[0],k=w[1],N=Object(r.useState)(!1),S=Object(o.a)(N,2),y=S[0],I=S[1],L=Object(r.useState)(0),X=Object(o.a)(L,2),A=X[0],U=X[1],V=Object(r.useState)(""),$=Object(o.a)(V,2),B=$[0],J=$[1],q=Object(v.a)(),z=q.walletAddr,D=q.balance,F=void 0===D?null:D,K=Object(h.a)(),P=K[x.a.WAVE],Q=K[x.a.WTOKEN],G=Object(g.a)(),Y=Object(O.b)(),Z=Object(r.useRef)(null),ee=Object(r.useCallback)((function(){z&&window.tronWeb.trx.getBalance(z).then((function(e){Y(Object(p.a)({balance:window.tronWeb.fromSun(e)}))}))}),[z]),te=Object(r.useState)(null),ne=Object(o.a)(te,2),ce=ne[0],re=ne[1],ae=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q&&z){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Q.balanceOf(z).call();case 4:(t=e.sent)&&re(Object(m.c)(t,18));case 6:case"end":return e.stop()}}),e)}))),[Q,z]);Object(r.useEffect)((function(){ae()}),[Q]);var ie=Object(r.useState)(0),se=Object(o.a)(ie,2),ue=se[0],oe=se[1],le=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P.clubTotal().call();case 4:(t=e.sent)&&oe(Number(Object(m.c)(t)));case 6:case"end":return e.stop()}}),e)}))),[P]);Object(r.useEffect)((function(){le()}),[P]);var be=Object(r.useState)(!1),je=Object(o.a)(be,2),de=je[0],fe=je[1],Oe=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P&&z){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P.players(z).call();case 4:(t=e.sent)&&(n=t.club.toNumber(),fe(n>0));case 6:case"end":return e.stop()}}),e)}))),[P,z]);Object(r.useEffect)((function(){Oe()}),[P,z]);var ve=Object(r.useState)(0),pe=Object(o.a)(ve,2),xe=pe[0],he=pe[1],me=Object(r.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return");case 2:return he(null),n=new d.a(t).multipliedBy(1e6).toString(),e.next=6,P.trySwap(n).call();case 6:c=e.sent,he(c?Object(m.c)(c,18):null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[P]),ge=Object(r.useState)(""),we=Object(o.a)(ge,2),_e=we[0],ke=we[1],Ne=Object(r.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(n){var c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(P){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,P.swap().send({callValue:n,feeLimit:1e9}).catch((function(e){Object(m.k)(e.toString()),Object(m.e)()}));case 4:c=t.sent,Object(m.e)(),c&&(ke(c),G(c,{summary:e("exchange_x_TRX",{amount:n.div(new d.a(1e6)).toString()})}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[P]),Se=Object(g.b)(_e,(function(t){ke(""),t?(Object(m.l)(e("exchange_succeeded")),ae()):Object(m.k)(e("exchange_failed"))})),ye=Object(r.useState)(""),Te=Object(o.a)(ye,2),Ee=Te[0],Ce=Te[1],We=Object(r.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(n){var c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(P){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,P.purchasing().send({callValue:n}).catch((function(e){Object(m.e)(),Object(m.k)(e.toString())}));case 4:c=t.sent,Object(m.e)(),c&&(Ce(c),G(c,{summary:e("purchase_x_TRX",{amount:n.div(new d.a(1e6)).toString()})}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[P,z]),He=Object(g.b)(Ee,(function(t){Ce(""),t?(Object(m.l)(e("purchase_succeeded")),ee(),le(),setTimeout((function(){fe(!0)}),0)):Object(m.k)(e("purchase_failed"))})),Me=Object(r.useState)(""),Re=Object(o.a)(Me,2),Ie=Re[0],Le=Re[1],Xe=Object(r.useCallback)(Object(u.a)(s.a.mark((function t(){var n,c,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Q){t.next=2;break}return t.abrupt("return");case 2:if(window.tronWeb.isAddress(B)){t.next=5;break}return Object(m.j)(e("please_enter_a_valid_address")),t.abrupt("return");case 5:if(B!==z){t.next=8;break}return Object(m.j)(e("you_cant_transfer_token_to_yourself")),t.abrupt("return");case 8:if((n=Number(A))===n&&0!==A){t.next=12;break}return Object(m.j)(e("please_enter_the_transfer_amount")),t.abrupt("return");case 12:if(!(n>Number(ce))){t.next=15;break}return Object(m.j)(e("insufficient_balance")),t.abrupt("return");case 15:return Object(m.h)(e("transfer")),l(!1),J(""),U(0),c=Object(m.i)(n,18).toString(),t.next=22,Q.transfer(B,c).send().catch((function(e){Object(m.e)()}));case 22:r=t.sent,Object(m.e)(),r&&(Le(r),G(r,{summary:e("transfer_x_wdt",{amount:n})}));case 25:case"end":return t.stop()}}),t)}))),[Q,z,B,A]),Ae=Object(g.b)(Ie,(function(t){Le(""),t?(Object(m.l)(e("transfer_successful")),ae(),ee()):Object(m.k)(e("transfer_failed"))})),Ue=function(){if(_)if(Number(F)<Number(_))Object(m.j)("trx "+e("insufficient_balance"));else{Object(m.h)(e(y?"purchase_club":"exchange"));var t=Object(m.i)(_,6);y?!de&&We(t):Ne(t)}},Ve=Object(r.useMemo)((function(){return[1,2,3,(2e5+2e3*ue)/1e4]}),[ue]),$e=function(){var t=Number(_),n=Number(F)<t,r=n||!_;return null==F?Object(c.jsx)("button",{disabled:!0,children:Object(c.jsx)(a.g,{})}):y?de?Object(c.jsx)("button",{className:"button",disabled:!0,children:e("already_purchase")}):Object(c.jsx)("button",{className:"button",disabled:r,onClick:function(){r||Ue()},children:e(n?"insufficient_balance":"purchase_club")}):Object(c.jsx)("button",{className:"button",disabled:r,onClick:function(){r||Ue()},children:e(n?"insufficient_balance":"exchange_now")})}();return Object(c.jsxs)("div",{className:"p-mapping-fuel",children:[Object(c.jsx)(a.f,{title:"\u5151\u6362"}),Object(c.jsxs)("div",{className:"cont",children:[Object(c.jsx)(a.c,{children:Object(c.jsxs)("div",{className:"flex",children:[Object(c.jsx)("img",{}),Object(c.jsxs)("ul",{className:"c-list",children:[Object(c.jsxs)("li",{children:[Object(c.jsx)("div",{children:e("x_assets",{x:"W"})}),Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[Object(c.jsx)(R,{value:ce,hasUnit:"w"}),Object(c.jsx)("button",{className:"send-out",onClick:function(){l(!0)},children:e("transfer")})]})]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("div",{children:e("x_assets",{x:"TRX"})}),Object(c.jsx)("div",{children:Object(c.jsx)(R,{value:F,hasUnit:"TRX"})})]})]})]})}),Object(c.jsxs)("div",{className:"title",children:[Object(c.jsx)("img",{src:W,alt:""}),Object(c.jsxs)(f.b,{to:"/clubs",children:[e("clubs")," >"]})]}),Object(c.jsxs)(a.c,{className:"box-1",children:[Object(c.jsx)("div",{className:"tags",children:Ve.map((function(t,n){return Object(c.jsx)("div",{className:b()({active:t===Number(_)}),onClick:function(){!function(e){if(null!==F){if(_===e)return k(0),void he(0);k(e),e===Ve[3]?(I(!0),he(0)):(me(e),I(!1))}}(t)},children:3===n?e("club"):"".concat(t," TRX")},t.toString())}))}),Object(c.jsxs)("ul",{children:[Object(c.jsxs)("li",{children:[Object(c.jsx)("div",{children:e("need_to_consume")}),Object(c.jsxs)("div",{className:"input",children:[Object(c.jsx)("input",{type:"number",value:null===_||void 0===_?void 0:_.toString(),onChange:function(e){var t=Number(e.target.value);t===t&&(k(t),y&&I(!1))},onBlur:function(e){var t=Number(e.target.value);t===t&&me(t)},placeholder:"Enter TRX Quantity"}),Object(c.jsx)("span",{children:"TRX"})]})]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("div",{children:e("expected_to_obtain")}),Object(c.jsx)("div",{children:Object(c.jsx)(R,{value:xe,hasUnit:"W"})})]}),Object(c.jsxs)("li",{children:[Object(c.jsx)("div",{children:e("has_bought_clubs")}),Object(c.jsx)("div",{children:"".concat(ue," / 125")})]})]}),$e]}),Object(c.jsx)("div",{className:"title",children:Object(c.jsx)("img",{src:H,alt:""})}),Object(c.jsx)(a.c,{children:Object(c.jsxs)(a.k,{labels:[e("exchange_record"),e("invitation_record"),e("transfer_record")],children:[Object(c.jsx)(T,{}),Object(c.jsx)(E,{}),Object(c.jsx)(C,{})]})})]}),Object(c.jsx)(a.i,{visible:i,onCancel:function(){l(!1)},buttons:[{text:e("cancel"),onClick:function(){l(!1),U(0)},styleType:0},{text:e("send_out"),onClick:Xe}],children:Object(c.jsxs)("div",{className:"transfer-form",children:[Object(c.jsx)("p",{children:e("send_out")}),Object(c.jsx)("div",{children:Object(c.jsx)("input",{ref:Z,type:"text",placeholder:e("wallet_address"),onChange:function(e){J(e.target.value)}})}),Object(c.jsx)("div",{children:Object(c.jsx)("input",{type:"text",value:A||"",placeholder:e("enter_wToken_quantity"),onChange:function(e){U(e.target.value)}})})]})}),Se&&Object(c.jsx)(a.h,{content:e("waiting_for_transaction")}),He&&Object(c.jsx)(a.h,{content:e("waiting_for_transaction")}),Ae&&Object(c.jsx)(a.h,{content:e("waiting_for_transaction")})]})},L=n(7);t.default=function(e){var t=e.match;Object(M.a)().t,Object(L.f)();try{Number(t.params.id)||0}catch(n){}return Object(c.jsx)(a.a,{className:"p-game",children:Object(c.jsx)(I,{})})}}}]);